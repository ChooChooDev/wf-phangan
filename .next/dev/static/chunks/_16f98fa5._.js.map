{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/nwmac/ProjectC/shootingRange/project/lib/supabase/client.ts"],"sourcesContent":["import { createBrowserClient } from '@supabase/ssr';\nimport type { Database } from '@/types/database';\n\nexport function createClient() {\n  return createBrowserClient<Database>(\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\n  );\n}\n"],"names":[],"mappings":";;;;AAKI;AALJ;AAAA;;AAGO,SAAS;IACd,OAAO,IAAA,oMAAmB;AAI5B"}},
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///Users/nwmac/ProjectC/shootingRange/project/components/LanguageSwitcher.tsx"],"sourcesContent":["'use client';\n\nimport { useRouter } from 'next/navigation';\nimport { useState, useTransition } from 'react';\n\nexport default function LanguageSwitcher({ currentLocale }: { currentLocale: string }) {\n  const router = useRouter();\n  const [isPending, startTransition] = useTransition();\n  const [locale, setLocale] = useState(currentLocale);\n\n  const handleChange = (newLocale: string) => {\n    setLocale(newLocale);\n    document.cookie = `NEXT_LOCALE=${newLocale}; path=/; max-age=31536000`;\n    startTransition(() => {\n      router.refresh();\n    });\n  };\n\n  return (\n    <div className=\"flex gap-2 bg-white rounded-lg p-1 shadow-sm\">\n      <button\n        onClick={() => handleChange('en')}\n        disabled={isPending}\n        className={`px-4 py-2 rounded-md text-sm font-medium transition-colors ${\n          locale === 'en'\n            ? 'bg-blue-600 text-white'\n            : 'text-gray-700 hover:bg-gray-100'\n        }`}\n      >\n        EN\n      </button>\n      <button\n        onClick={() => handleChange('th')}\n        disabled={isPending}\n        className={`px-4 py-2 rounded-md text-sm font-medium transition-colors ${\n          locale === 'th'\n            ? 'bg-blue-600 text-white'\n            : 'text-gray-700 hover:bg-gray-100'\n        }`}\n      >\n        TH\n      </button>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AAKe,SAAS,iBAAiB,EAAE,aAAa,EAA6B;;IACnF,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,CAAC,WAAW,gBAAgB,GAAG,IAAA,8KAAa;IAClD,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAC;IAErC,MAAM,eAAe,CAAC;QACpB,UAAU;QACV,SAAS,MAAM,GAAG,CAAC,YAAY,EAAE,UAAU,0BAA0B,CAAC;QACtE,gBAAgB;YACd,OAAO,OAAO;QAChB;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBACC,SAAS,IAAM,aAAa;gBAC5B,UAAU;gBACV,WAAW,CAAC,2DAA2D,EACrE,WAAW,OACP,2BACA,mCACJ;0BACH;;;;;;0BAGD,6LAAC;gBACC,SAAS,IAAM,aAAa;gBAC5B,UAAU;gBACV,WAAW,CAAC,2DAA2D,EACrE,WAAW,OACP,2BACA,mCACJ;0BACH;;;;;;;;;;;;AAKP;GAvCwB;;QACP,kJAAS;QACa,8KAAa;;;KAF5B"}},
    {"offset": {"line": 92, "column": 0}, "map": {"version":3,"sources":["file:///Users/nwmac/ProjectC/shootingRange/project/app/failed/page.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport { createClient } from '@/lib/supabase/client';\nimport { useRouter } from 'next/navigation';\nimport Link from 'next/link';\nimport LanguageSwitcher from '@/components/LanguageSwitcher';\n\ntype FailedSubmission = {\n  id: string;\n  ref_id: string;\n  passport_number: string;\n  first_name: string;\n  last_name: string;\n  full_name: string;\n  nationality: string;\n  date_of_birth: string;\n  status: string;\n  storehub_error: string;\n  retry_count: number;\n  created_at: string;\n  updated_at: string;\n};\n\nexport default function FailedSubmissionsPage() {\n  const router = useRouter();\n  const [submissions, setSubmissions] = useState<FailedSubmission[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [processingId, setProcessingId] = useState<string | null>(null);\n  const [currentLocale, setCurrentLocale] = useState('en');\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    const locale = document.cookie\n      .split('; ')\n      .find(row => row.startsWith('NEXT_LOCALE='))\n      ?.split('=')[1] || 'en';\n    setCurrentLocale(locale);\n\n    fetchFailedSubmissions();\n  }, []);\n\n  const fetchFailedSubmissions = async () => {\n    try {\n      const supabase = createClient();\n      const { data: user } = await supabase.auth.getUser();\n\n      if (!user) {\n        router.push('/login');\n        return;\n      }\n\n      const { data, error } = await supabase\n        .from('member_submissions')\n        .select('*')\n        .eq('status', 'storehub_failed')\n        .order('updated_at', { ascending: false });\n\n      if (error) {\n        console.error('Error fetching submissions:', error);\n        setError('Failed to load submissions');\n      } else {\n        setSubmissions(data || []);\n      }\n    } catch (err) {\n      console.error('Error:', err);\n      setError('An error occurred');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleRetry = async (submissionId: string) => {\n    setProcessingId(submissionId);\n    setError('');\n\n    try {\n      const response = await fetch('/api/storehub/manual-retry', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ submissionId }),\n      });\n\n      const result = await response.json();\n\n      if (result.success) {\n        alert(currentLocale === 'th' ? 'ส่งสำเร็จ!' : 'Successfully sent to StoreHub!');\n        await fetchFailedSubmissions(); // Refresh the list\n      } else {\n        alert(\n          currentLocale === 'th'\n            ? `เกิดข้อผิดพลาด: ${result.error}`\n            : `Error: ${result.error}`\n        );\n      }\n    } catch (err) {\n      console.error('Retry error:', err);\n      alert(currentLocale === 'th' ? 'เกิดข้อผิดพลาด' : 'An error occurred');\n    } finally {\n      setProcessingId(null);\n    }\n  };\n\n  const handleCancel = async (submissionId: string) => {\n    const confirmed = confirm(\n      currentLocale === 'th'\n        ? 'คุณแน่ใจหรือไม่ว่าต้องการยกเลิกการส่งนี้?'\n        : 'Are you sure you want to cancel this submission?'\n    );\n\n    if (!confirmed) return;\n\n    setProcessingId(submissionId);\n    setError('');\n\n    try {\n      const response = await fetch('/api/storehub/cancel', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ submissionId }),\n      });\n\n      const result = await response.json();\n\n      if (result.success) {\n        alert(currentLocale === 'th' ? 'ยกเลิกสำเร็จ' : 'Successfully cancelled');\n        await fetchFailedSubmissions(); // Refresh the list\n      } else {\n        alert(\n          currentLocale === 'th'\n            ? `เกิดข้อผิดพลาด: ${result.error}`\n            : `Error: ${result.error}`\n        );\n      }\n    } catch (err) {\n      console.error('Cancel error:', err);\n      alert(currentLocale === 'th' ? 'เกิดข้อผิดพลาด' : 'An error occurred');\n    } finally {\n      setProcessingId(null);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <header className=\"bg-white shadow-sm\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4\">\n          <div className=\"flex justify-between items-center\">\n            <h1 className=\"text-2xl font-bold text-gray-900\">\n              {currentLocale === 'th' ? 'การส่งที่ล้มเหลว' : 'Failed Submissions'}\n            </h1>\n            <div className=\"flex items-center gap-4\">\n              <LanguageSwitcher currentLocale={currentLocale} />\n              <Link\n                href=\"/dashboard\"\n                className=\"px-4 py-2 text-sm font-medium text-gray-700 hover:text-gray-900 transition\"\n              >\n                {currentLocale === 'th' ? 'กลับหน้าหลัก' : 'Back to Dashboard'}\n              </Link>\n            </div>\n          </div>\n        </div>\n      </header>\n\n      <main className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        {error && (\n          <div className=\"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg\">\n            {error}\n          </div>\n        )}\n\n        <div className=\"bg-white rounded-lg shadow overflow-hidden\">\n          {loading ? (\n            <div className=\"text-center py-12\">\n              <p className=\"text-gray-600\">\n                {currentLocale === 'th' ? 'กำลังโหลด...' : 'Loading...'}\n              </p>\n            </div>\n          ) : submissions.length === 0 ? (\n            <div className=\"text-center py-12\">\n              <p className=\"text-gray-600\">\n                {currentLocale === 'th'\n                  ? 'ไม่มีการส่งที่ล้มเหลว'\n                  : 'No failed submissions'}\n              </p>\n            </div>\n          ) : (\n            <div className=\"overflow-x-auto\">\n              <table className=\"min-w-full divide-y divide-gray-200\">\n                <thead className=\"bg-gray-50\">\n                  <tr>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      {currentLocale === 'th' ? 'รหัสอ้างอิง' : 'Ref ID'}\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      {currentLocale === 'th' ? 'ชื่อ' : 'Name'}\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      {currentLocale === 'th' ? 'หนังสือเดินทาง' : 'Passport'}\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      {currentLocale === 'th' ? 'ความพยายาม' : 'Attempts'}\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      {currentLocale === 'th' ? 'ข้อผิดพลาด' : 'Error'}\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      {currentLocale === 'th' ? 'อัปเดตล่าสุด' : 'Last Updated'}\n                    </th>\n                    <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      {currentLocale === 'th' ? 'การดำเนินการ' : 'Actions'}\n                    </th>\n                  </tr>\n                </thead>\n                <tbody className=\"bg-white divide-y divide-gray-200\">\n                  {submissions.map((submission) => (\n                    <tr key={submission.id} className=\"hover:bg-gray-50\">\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm font-mono text-gray-600\">\n                        {submission.ref_id.substring(0, 8)}...\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                        {submission.full_name}\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm font-mono text-gray-600\">\n                        {submission.passport_number}\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                        {submission.retry_count}\n                      </td>\n                      <td className=\"px-6 py-4 text-sm text-red-600 max-w-xs truncate\">\n                        {submission.storehub_error || 'Unknown error'}\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-600\">\n                        {new Date(submission.updated_at).toLocaleString(\n                          currentLocale === 'th' ? 'th-TH' : 'en-GB'\n                        )}\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2\">\n                        <button\n                          onClick={() => handleRetry(submission.id)}\n                          disabled={processingId === submission.id}\n                          className=\"inline-flex items-center px-3 py-1 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n                        >\n                          {processingId === submission.id\n                            ? (currentLocale === 'th' ? 'กำลังดำเนินการ...' : 'Processing...')\n                            : (currentLocale === 'th' ? 'ลองใหม่' : 'Retry')}\n                        </button>\n                        <button\n                          onClick={() => handleCancel(submission.id)}\n                          disabled={processingId === submission.id}\n                          className=\"inline-flex items-center px-3 py-1 border border-gray-300 text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n                        >\n                          {currentLocale === 'th' ? 'ยกเลิก' : 'Cancel'}\n                        </button>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          )}\n        </div>\n\n        {submissions.length > 0 && (\n          <div className=\"mt-4 text-sm text-gray-600 text-center\">\n            {currentLocale === 'th'\n              ? `แสดง ${submissions.length} รายการที่ล้มเหลว`\n              : `Showing ${submissions.length} failed submission${submissions.length !== 1 ? 's' : ''}`}\n          </div>\n        )}\n      </main>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":"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"}}]
}