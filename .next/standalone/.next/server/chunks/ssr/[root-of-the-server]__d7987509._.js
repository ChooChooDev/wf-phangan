module.exports=[66680,(a,b,c)=>{b.exports=a.x("node:crypto",()=>require("node:crypto"))},8618,a=>{"use strict";var b=a.i(87924),c=a.i(7664),d=a.i(72131);let e=["Afghanistan","Albania","Algeria","Andorra","Angola","Antigua and Barbuda","Argentina","Armenia","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bhutan","Bolivia","Bosnia and Herzegovina","Botswana","Brazil","Brunei","Bulgaria","Burkina Faso","Burundi","Cabo Verde","Cambodia","Cameroon","Canada","Central African Republic","Chad","Chile","China","Colombia","Comoros","Congo","Costa Rica","Croatia","Cuba","Cyprus","Czech Republic","Democratic Republic of the Congo","Denmark","Djibouti","Dominica","Dominican Republic","East Timor","Ecuador","Egypt","El Salvador","Equatorial Guinea","Eritrea","Estonia","Eswatini","Ethiopia","Fiji","Finland","France","Gabon","Gambia","Georgia","Germany","Ghana","Greece","Grenada","Guatemala","Guinea","Guinea-Bissau","Guyana","Haiti","Honduras","Hungary","Iceland","India","Indonesia","Iran","Iraq","Ireland","Israel","Italy","Ivory Coast","Jamaica","Japan","Jordan","Kazakhstan","Kenya","Kiribati","Kosovo","Kuwait","Kyrgyzstan","Laos","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Marshall Islands","Mauritania","Mauritius","Mexico","Micronesia","Moldova","Monaco","Mongolia","Montenegro","Morocco","Mozambique","Myanmar","Namibia","Nauru","Nepal","Netherlands","New Zealand","Nicaragua","Niger","Nigeria","North Korea","North Macedonia","Norway","Oman","Pakistan","Palau","Palestine","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Poland","Portugal","Qatar","Romania","Russia","Rwanda","Saint Kitts and Nevis","Saint Lucia","Saint Vincent and the Grenadines","Samoa","San Marino","Sao Tome and Principe","Saudi Arabia","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Slovakia","Slovenia","Solomon Islands","Somalia","South Africa","South Korea","South Sudan","Spain","Sri Lanka","Sudan","Suriname","Sweden","Switzerland","Syria","Taiwan","Tajikistan","Tanzania","Thailand","Togo","Tonga","Trinidad and Tobago","Tunisia","Turkey","Turkmenistan","Tuvalu","Uganda","Ukraine","United Arab Emirates","United Kingdom","United States","Uruguay","Uzbekistan","Vanuatu","Vatican City","Venezuela","Vietnam","Yemen","Zambia","Zimbabwe"],f={Afghanistan:"อัฟกานิสถาน",Albania:"แอลเบเนีย",Algeria:"แอลจีเรีย",Andorra:"อันดอร์รา",Angola:"แองโกลา",Argentina:"อาร์เจนตินา",Armenia:"อาร์มีเนีย",Australia:"ออสเตรเลีย",Austria:"ออสเตรีย",Azerbaijan:"อาเซอร์ไบจาน",Bahamas:"บาฮามาส",Bahrain:"บาห์เรน",Bangladesh:"บังกลาเทศ",Belarus:"เบลารุส",Belgium:"เบลเยียม",Bolivia:"โบลิเวีย","Bosnia and Herzegovina":"บอสเนียและเฮอร์เซโกวีนา",Brazil:"บราซิล",Brunei:"บรูไน",Bulgaria:"บัลแกเรีย",Cambodia:"กัมพูชา",Cameroon:"แคเมอรูน",Canada:"แคนาดา",Chile:"ชิลี",China:"จีน",Colombia:"โคลอมเบีย","Costa Rica":"คอสตาริกา",Croatia:"โครเอเชีย",Cuba:"คิวบา",Cyprus:"ไซปรัส","Czech Republic":"สาธารณรัฐเช็ก",Denmark:"เดนมาร์ก",Ecuador:"เอกวาดอร์",Egypt:"อียิปต์",Estonia:"เอสโตเนีย",Ethiopia:"เอธิโอเปีย",Finland:"ฟินแลนด์",France:"ฝรั่งเศส",Georgia:"จอร์เจีย",Germany:"เยอรมนี",Ghana:"กานา",Greece:"กรีซ",Hungary:"ฮังการี",Iceland:"ไอซ์แลนด์",India:"อินเดีย",Indonesia:"อินโดนีเซีย",Iran:"อิหร่าน",Iraq:"อิรัก",Ireland:"ไอร์แลนด์",Israel:"อิสราเอล",Italy:"อิตาลี",Jamaica:"จาเมกา",Japan:"ญี่ปุ่น",Jordan:"จอร์แดน",Kazakhstan:"คาซัคสถาน",Kenya:"เคนยา",Kuwait:"คูเวต",Kyrgyzstan:"คีร์กีซสถาน",Laos:"ลาว",Latvia:"ลัตเวีย",Lebanon:"เลบานอน",Libya:"ลิเบีย",Lithuania:"ลิทัวเนีย",Luxembourg:"ลักเซมเบิร์ก",Malaysia:"มาเลเซีย",Maldives:"มัลดีฟส์",Mexico:"เม็กซิโก",Moldova:"มอลโดวา",Monaco:"โมนาโก",Mongolia:"มองโกเลีย",Morocco:"โมร็อกโก",Myanmar:"พม่า",Nepal:"เนปาล",Netherlands:"เนเธอร์แลนด์","New Zealand":"นิวซีแลนด์",Nigeria:"ไนจีเรีย","North Korea":"เกาหลีเหนือ",Norway:"นอร์เวย์",Oman:"โอมาน",Pakistan:"ปากีสถาน",Palestine:"ปาเลสไตน์",Panama:"ปานามา",Peru:"เปรู",Philippines:"ฟิลิปปินส์",Poland:"โปแลนด์",Portugal:"โปรตุเกส",Qatar:"กาตาร์",Romania:"โรมาเนีย",Russia:"รัสเซีย","Saudi Arabia":"ซาอุดีอาระเบีย",Serbia:"เซอร์เบีย",Singapore:"สิงคโปร์",Slovakia:"สโลวาเกีย",Slovenia:"สโลวีเนีย","South Africa":"แอฟริกาใต้","South Korea":"เกาหลีใต้",Spain:"สเปน","Sri Lanka":"ศรีลังกา",Sudan:"ซูดาน",Sweden:"สวีเดน",Switzerland:"สวิตเซอร์แลนด์",Syria:"ซีเรีย",Taiwan:"ไต้หวัน",Tajikistan:"ทาจิกิสถาน",Tanzania:"แทนซาเนีย",Thailand:"ไทย",Turkey:"ตุรกี",Turkmenistan:"เติร์กเมนิสถาน",Uganda:"ยูกันดา",Ukraine:"ยูเครน","United Arab Emirates":"สหรัฐอาหรับเอมิเรตส์","United Kingdom":"สหราชอาณาจักร","United States":"สหรัฐอเมริกา",Uruguay:"อุรุกวัย",Uzbekistan:"อุซเบกิสถาน",Venezuela:"เวเนซุเอลา",Vietnam:"เวียดนาม",Yemen:"เยเมน"};function g({value:a,onChange:c,placeholder:g,error:h,locale:i}){let[j,k]=(0,d.useState)(a),[l,m]=(0,d.useState)(!1),[n,o]=(0,d.useState)([]),p=(0,d.useRef)(null);(0,d.useEffect)(()=>{k(a)},[a]),(0,d.useEffect)(()=>{let a=a=>{p.current&&!p.current.contains(a.target)&&m(!1)};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]);let q=a=>{k(a),c(a),a.trim()?(o(e.filter(b=>b.toLowerCase().includes(a.toLowerCase()))),m(!0)):(o([]),m(!1))};return(0,b.jsxs)("div",{ref:p,className:"relative",children:[(0,b.jsx)("input",{type:"text",value:"th"===i&&f[j]?f[j]:j,onChange:a=>{let b=a.target.value;"th"===i?q(Object.entries(f).find(([a,c])=>c===b)?.[0]||b):q(b)},onFocus:()=>{o(e),m(!0)},placeholder:g,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition ${h?"border-red-500":"border-gray-300"}`}),l&&n.length>0&&(0,b.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-auto",children:n.map(a=>(0,b.jsx)("div",{onClick:()=>{k(a),c(a),m(!1)},className:"px-4 py-2 hover:bg-blue-50 cursor-pointer transition",children:"th"===i&&f[a]?f[a]:a},a))}),h&&(0,b.jsx)("p",{className:"mt-1 text-sm text-red-600",children:h})]})}var h=a.i(69240),i=a.i(66680);let j=function(a){return Array.isArray(a)?a=Buffer.from(a):"string"==typeof a&&(a=Buffer.from(a,"utf8")),(0,i.createHash)("sha1").update(a).digest()},k=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i,l=function(a){let b;if(!("string"==typeof a&&k.test(a)))throw TypeError("Invalid UUID");return Uint8Array.of((b=parseInt(a.slice(0,8),16))>>>24,b>>>16&255,b>>>8&255,255&b,(b=parseInt(a.slice(9,13),16))>>>8,255&b,(b=parseInt(a.slice(14,18),16))>>>8,255&b,(b=parseInt(a.slice(19,23),16))>>>8,255&b,(b=parseInt(a.slice(24,36),16))/0x10000000000&255,b/0x100000000&255,b>>>24&255,b>>>16&255,b>>>8&255,255&b)},m=[];for(let a=0;a<256;++a)m.push((a+256).toString(16).slice(1));function n(a,b,c,d){var e=b,f=d;let g="string"==typeof a?function(a){let b=new Uint8Array((a=unescape(encodeURIComponent(a))).length);for(let c=0;c<a.length;++c)b[c]=a.charCodeAt(c);return b}(a):a,h="string"==typeof e?l(e):e;if("string"==typeof e&&(e=l(e)),e?.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let i=new Uint8Array(16+g.length);if(i.set(h),i.set(g,h.length),(i=j(i))[6]=15&i[6]|80,i[8]=63&i[8]|128,c){f=f||0;for(let a=0;a<16;++a)c[f+a]=i[a];return c}return function(a,b=0){return(m[a[b+0]]+m[a[b+1]]+m[a[b+2]]+m[a[b+3]]+"-"+m[a[b+4]]+m[a[b+5]]+"-"+m[a[b+6]]+m[a[b+7]]+"-"+m[a[b+8]]+m[a[b+9]]+"-"+m[a[b+10]]+m[a[b+11]]+m[a[b+12]]+m[a[b+13]]+m[a[b+14]]+m[a[b+15]]).toLowerCase()}(i)}function o(a){return a.replace(/[\s\-]/g,"").toUpperCase()}n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";var p=a.i(15925),q=a.i(50944);function r(){var a;let e,f,i,j,k=(0,q.useRouter)(),l=(0,p.useTranslations)(),[m,r]=(0,d.useState)(1),[s,t]=(0,d.useState)(!1),[u,v]=(0,d.useState)(""),[w,x]=(0,d.useState)({passport_number:"",first_name:"",last_name:"",date_of_birth:"",nationality:""}),[y,z]=(0,d.useState)({}),A="undefined"!=typeof document&&document.cookie.split("; ").find(a=>a.startsWith("NEXT_LOCALE="))?.split("=")[1]||"en",B=async()=>{if((()=>{let a={};if(w.passport_number.trim()?w.passport_number.trim().length<5&&(a.passport_number=l("form.invalidPassport")):a.passport_number=l("form.required"),w.first_name.trim()||(a.first_name=l("form.required")),w.last_name.trim()||(a.last_name=l("form.required")),w.date_of_birth){let b=new Date(w.date_of_birth),c=new Date,d=c.getFullYear()-b.getFullYear(),e=c.getMonth()-b.getMonth(),f=c.getDate()-b.getDate();(d<20||20===d&&(e<0||0===e&&f<0))&&(a.date_of_birth=l("form.minAge"))}else a.date_of_birth=l("form.required");return w.nationality.trim()||(a.nationality=l("form.required")),z(a),0===Object.keys(a).length})()){t(!0),v("");try{let a=(0,h.createClient)(),b=o(w.passport_number),{data:c}=await a.from("member_submissions").select("id").eq("passport_number",b).maybeSingle();if(c){z({passport_number:l("form.duplicatePassport")}),t(!1);return}r(2)}catch(a){v("An error occurred. Please try again.")}finally{t(!1)}}},C=async()=>{t(!0),v("");try{let a=(0,h.createClient)(),{data:{user:b}}=await a.auth.getUser();if(!b)return void k.push("/login");let c=o(w.passport_number),d=n(o(c),"550e8400-e29b-41d4-a716-446655440000"),e={ref_id:d,passport_number:c,first_name:w.first_name,last_name:w.last_name,full_name:`${w.first_name} ${w.last_name}`,date_of_birth:w.date_of_birth,nationality:w.nationality,status:"confirmed",created_by:b.id},{data:f,error:g}=await a.from("member_submissions").insert(e).select().single();if(g||!f)throw Error(g?.message||"Failed to create submission");let i=await fetch("/api/storehub/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({submissionId:f.id})}),j=await i.json();j.success?k.push(`/register/success?refId=${d}`):k.push(`/register/error?message=${encodeURIComponent(j.error||"Unknown error")}`)}catch(a){v("Failed to submit registration. Please try again."),t(!1)}};return(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,b.jsx)("header",{className:"bg-white shadow-sm",children:(0,b.jsx)("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:l("registration.title")}),(0,b.jsx)(c.default,{currentLocale:A})]})})}),(0,b.jsx)("main",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[u&&(0,b.jsx)("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:u}),1===m&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:l("registration.step1Title")}),(0,b.jsx)("p",{className:"text-gray-600",children:l("registration.step1Description")})]}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:l("form.passportNumber")}),(0,b.jsx)("input",{type:"text",value:w.passport_number,onChange:a=>x({...w,passport_number:a.target.value}),placeholder:l("form.passportPlaceholder"),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition ${y.passport_number?"border-red-500":"border-gray-300"}`}),y.passport_number&&(0,b.jsx)("p",{className:"mt-1 text-sm text-red-600",children:y.passport_number})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:l("form.firstName")}),(0,b.jsx)("input",{type:"text",value:w.first_name,onChange:a=>x({...w,first_name:a.target.value}),placeholder:l("form.firstNamePlaceholder"),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition ${y.first_name?"border-red-500":"border-gray-300"}`}),y.first_name&&(0,b.jsx)("p",{className:"mt-1 text-sm text-red-600",children:y.first_name})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:l("form.lastName")}),(0,b.jsx)("input",{type:"text",value:w.last_name,onChange:a=>x({...w,last_name:a.target.value}),placeholder:l("form.lastNamePlaceholder"),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition ${y.last_name?"border-red-500":"border-gray-300"}`}),y.last_name&&(0,b.jsx)("p",{className:"mt-1 text-sm text-red-600",children:y.last_name})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:l("form.dateOfBirth")}),(0,b.jsx)("input",{type:"date",value:w.date_of_birth,onChange:a=>x({...w,date_of_birth:a.target.value}),max:(f=(a=new Date((e=new Date).getFullYear()-20,e.getMonth(),e.getDate())).getFullYear(),i=String(a.getMonth()+1).padStart(2,"0"),j=String(a.getDate()).padStart(2,"0"),`${f}-${i}-${j}`),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition ${y.date_of_birth?"border-red-500":"border-gray-300"}`}),y.date_of_birth&&(0,b.jsx)("p",{className:"mt-1 text-sm text-red-600",children:y.date_of_birth})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:l("form.nationality")}),(0,b.jsx)(g,{value:w.nationality,onChange:a=>x({...w,nationality:a}),placeholder:l("form.nationalityPlaceholder"),error:y.nationality,locale:A})]})]}),(0,b.jsxs)("div",{className:"mt-8 flex gap-4",children:[(0,b.jsx)("button",{type:"button",onClick:()=>k.push("/dashboard"),className:"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition",children:l("common.cancel")}),(0,b.jsx)("button",{type:"button",onClick:B,disabled:s,className:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition disabled:opacity-50 disabled:cursor-not-allowed",children:s?l("common.loading"):l("common.next")})]})]}),2===m&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:l("registration.step2Title")}),(0,b.jsx)("p",{className:"text-gray-600",children:l("registration.step2Description")})]}),(0,b.jsxs)("div",{className:"space-y-4 mb-8",children:[(0,b.jsxs)("div",{className:"flex justify-between py-3 border-b",children:[(0,b.jsxs)("span",{className:"font-medium text-gray-700",children:[l("form.passportNumber"),":"]}),(0,b.jsx)("span",{className:"text-gray-900",children:w.passport_number})]}),(0,b.jsxs)("div",{className:"flex justify-between py-3 border-b",children:[(0,b.jsxs)("span",{className:"font-medium text-gray-700",children:[l("form.firstName"),":"]}),(0,b.jsx)("span",{className:"text-gray-900",children:w.first_name})]}),(0,b.jsxs)("div",{className:"flex justify-between py-3 border-b",children:[(0,b.jsxs)("span",{className:"font-medium text-gray-700",children:[l("form.lastName"),":"]}),(0,b.jsx)("span",{className:"text-gray-900",children:w.last_name})]}),(0,b.jsxs)("div",{className:"flex justify-between py-3 border-b",children:[(0,b.jsxs)("span",{className:"font-medium text-gray-700",children:[l("form.dateOfBirth"),":"]}),(0,b.jsx)("span",{className:"text-gray-900",children:new Date(w.date_of_birth).toLocaleDateString("th"===A?"th-TH":"en-GB")})]}),(0,b.jsxs)("div",{className:"flex justify-between py-3 border-b",children:[(0,b.jsxs)("span",{className:"font-medium text-gray-700",children:[l("form.nationality"),":"]}),(0,b.jsx)("span",{className:"text-gray-900",children:w.nationality})]})]}),(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsx)("button",{type:"button",onClick:()=>{r(1)},disabled:s,className:"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition disabled:opacity-50",children:l("common.edit")}),(0,b.jsx)("button",{type:"button",onClick:C,disabled:s,className:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition disabled:opacity-50 disabled:cursor-not-allowed",children:s?l("registration.submitting"):l("common.confirm")})]})]})]})})]})}a.s(["default",()=>r],8618)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__d7987509._.js.map