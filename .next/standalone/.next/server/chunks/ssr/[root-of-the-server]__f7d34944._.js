module.exports=[56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},46058,(a,b,c)=>{"use strict";function d(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(d=function(a){return a?c:b})(a)}c._=function(a,b){if(!b&&a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var c=d(b);if(c&&c.has(a))return c.get(a);var e={__proto__:null},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in a)if("default"!==g&&Object.prototype.hasOwnProperty.call(a,g)){var h=f?Object.getOwnPropertyDescriptor(a,g):null;h&&(h.get||h.set)?Object.defineProperty(e,g,h):e[g]=a[g]}return e.default=a,c&&c.set(a,e),e}},8591,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"useMergedRef",{enumerable:!0,get:function(){return e}});let d=a.r(72131);function e(a,b){let c=(0,d.useRef)(null),e=(0,d.useRef)(null);return(0,d.useCallback)(d=>{if(null===d){let a=c.current;a&&(c.current=null,a());let b=e.current;b&&(e.current=null,b())}else a&&(c.current=f(a,d)),b&&(e.current=f(b,d))},[a,b])}function f(a,b){if("function"!=typeof a)return a.current=b,()=>{a.current=null};{let c=a(b);return"function"==typeof c?c:()=>a(null)}}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},92434,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"warnOnce",{enumerable:!0,get:function(){return d}});let d=a=>{}},7664,a=>{"use strict";var b=a.i(87924),c=a.i(50944),d=a.i(72131);function e({currentLocale:a}){let e=(0,c.useRouter)(),[f,g]=(0,d.useTransition)(),[h,i]=(0,d.useState)(a),j=a=>{i(a),document.cookie=`NEXT_LOCALE=${a}; path=/; max-age=31536000`,g(()=>{e.refresh()})};return(0,b.jsxs)("div",{className:"flex gap-2 bg-white rounded-lg p-1 shadow-sm",children:[(0,b.jsx)("button",{onClick:()=>j("en"),disabled:f,className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${"en"===h?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:"EN"}),(0,b.jsx)("button",{onClick:()=>j("th"),disabled:f,className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${"th"===h?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:"TH"})]})}a.s(["default",()=>e])},40665,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(69240),e=a.i(50944),f=a.i(38246),g=a.i(7664);function h(){let a=(0,e.useRouter)(),[h,i]=(0,c.useState)([]),[j,k]=(0,c.useState)(!0),[l,m]=(0,c.useState)(null),[n,o]=(0,c.useState)("en"),[p,q]=(0,c.useState)("");(0,c.useEffect)(()=>{o(document.cookie.split("; ").find(a=>a.startsWith("NEXT_LOCALE="))?.split("=")[1]||"en"),r()},[]);let r=async()=>{try{let b=(0,d.createClient)(),{data:c}=await b.auth.getUser();if(!c)return void a.push("/login");let{data:e,error:f}=await b.from("member_submissions").select("*").eq("status","storehub_failed").order("updated_at",{ascending:!1});f?(console.error("Error fetching submissions:",f),q("Failed to load submissions")):i(e||[])}catch(a){console.error("Error:",a),q("An error occurred")}finally{k(!1)}},s=async a=>{m(a),q("");try{let b=await fetch("/api/storehub/manual-retry",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({submissionId:a})}),c=await b.json();c.success?(alert("th"===n?"ส่งสำเร็จ!":"Successfully sent to StoreHub!"),await r()):alert("th"===n?`เกิดข้อผิดพลาด: ${c.error}`:`Error: ${c.error}`)}catch(a){console.error("Retry error:",a),alert("th"===n?"เกิดข้อผิดพลาด":"An error occurred")}finally{m(null)}},t=async a=>{if(confirm("th"===n?"คุณแน่ใจหรือไม่ว่าต้องการยกเลิกการส่งนี้?":"Are you sure you want to cancel this submission?")){m(a),q("");try{let b=await fetch("/api/storehub/cancel",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({submissionId:a})}),c=await b.json();c.success?(alert("th"===n?"ยกเลิกสำเร็จ":"Successfully cancelled"),await r()):alert("th"===n?`เกิดข้อผิดพลาด: ${c.error}`:`Error: ${c.error}`)}catch(a){console.error("Cancel error:",a),alert("th"===n?"เกิดข้อผิดพลาด":"An error occurred")}finally{m(null)}}};return(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,b.jsx)("header",{className:"bg-white shadow-sm",children:(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"th"===n?"การส่งที่ล้มเหลว":"Failed Submissions"}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(g.default,{currentLocale:n}),(0,b.jsx)(f.default,{href:"/dashboard",className:"px-4 py-2 text-sm font-medium text-gray-700 hover:text-gray-900 transition",children:"th"===n?"กลับหน้าหลัก":"Back to Dashboard"})]})]})})}),(0,b.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[p&&(0,b.jsx)("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:p}),(0,b.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:j?(0,b.jsx)("div",{className:"text-center py-12",children:(0,b.jsx)("p",{className:"text-gray-600",children:"th"===n?"กำลังโหลด...":"Loading..."})}):0===h.length?(0,b.jsx)("div",{className:"text-center py-12",children:(0,b.jsx)("p",{className:"text-gray-600",children:"th"===n?"ไม่มีการส่งที่ล้มเหลว":"No failed submissions"})}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,b.jsx)("thead",{className:"bg-gray-50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"th"===n?"รหัสอ้างอิง":"Ref ID"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"th"===n?"ชื่อ":"Name"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"th"===n?"หนังสือเดินทาง":"Passport"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"th"===n?"ความพยายาม":"Attempts"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"th"===n?"ข้อผิดพลาด":"Error"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"th"===n?"อัปเดตล่าสุด":"Last Updated"}),(0,b.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"th"===n?"การดำเนินการ":"Actions"})]})}),(0,b.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:h.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,b.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-mono text-gray-600",children:[a.ref_id.substring(0,8),"..."]}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:a.full_name}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-mono text-gray-600",children:a.passport_number}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:a.retry_count}),(0,b.jsx)("td",{className:"px-6 py-4 text-sm text-red-600 max-w-xs truncate",children:a.storehub_error||"Unknown error"}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:new Date(a.updated_at).toLocaleString("th"===n?"th-TH":"en-GB")}),(0,b.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2",children:[(0,b.jsx)("button",{onClick:()=>s(a.id),disabled:l===a.id,className:"inline-flex items-center px-3 py-1 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:l===a.id?"th"===n?"กำลังดำเนินการ...":"Processing...":"th"===n?"ลองใหม่":"Retry"}),(0,b.jsx)("button",{onClick:()=>t(a.id),disabled:l===a.id,className:"inline-flex items-center px-3 py-1 border border-gray-300 text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 disabled:opacity-50 disabled:cursor-not-allowed",children:"th"===n?"ยกเลิก":"Cancel"})]})]},a.id))})]})})}),h.length>0&&(0,b.jsx)("div",{className:"mt-4 text-sm text-gray-600 text-center",children:"th"===n?`แสดง ${h.length} รายการที่ล้มเหลว`:`Showing ${h.length} failed submission${1!==h.length?"s":""}`})]})]})}a.s(["default",()=>h])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__f7d34944._.js.map